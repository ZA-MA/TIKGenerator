<UserControl x:Class="TIKGenerator.Views.Components.SignalProcessing.SignalProcessing"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:local="clr-namespace:TIKGenerator.Views.Components.SignalProcessing"
             Height="Auto" Width="Auto">
    <Grid Margin="5">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <TextBlock Grid.Row="0" Grid.Column="0" Text="Метод обработки:" VerticalAlignment="Center" Margin="0,0,10,0"/>
        <CheckBox Grid.Row="0" Grid.Column="1" Content="Использовать БПФ" 
                  VerticalAlignment="Center" HorizontalAlignment="Left"
                  ToolTip="Применять обработку через частотную область (БПФ → маска → обратное БПФ)"
                  IsChecked="{Binding Processing.UseFFT, 
                              RelativeSource={RelativeSource AncestorType=UserControl}, 
                              Mode=TwoWay}" Style="{StaticResource CheckBoxStyle}"/>

        <Button 
            Grid.Row="0" Grid.Column="3"
            Content="Применить"
            Style="{StaticResource ButtonStyle}"
            Height="20"
            HorizontalAlignment="Right"
            Margin="0"
            Width="80" 
            Command="{Binding Processing.ApplyCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
            />

        <StackPanel Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Orientation="Horizontal" Margin="0,10,0,0">
            <RadioButton Content="Нет" GroupName="Processing"
                         IsChecked="{Binding Processing.IsNoneSelected, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}"
                         Margin="0,0,15,0" Style="{StaticResource RadioButtonStyle}"/>
            <RadioButton Content="ФНЧ" GroupName="Processing"
                         IsChecked="{Binding Processing.IsLowPassSelected, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}"
                         Margin="0,0,15,0" Style="{StaticResource RadioButtonStyle}"/>
            <RadioButton Content="ФВЧ" GroupName="Processing"
                         IsChecked="{Binding Processing.IsHighPassSelected, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}"
                         Margin="0,0,15,0" Style="{StaticResource RadioButtonStyle}"/>
            <RadioButton Content="Полосовой" GroupName="Processing"
                         IsChecked="{Binding Processing.IsBandPassSelected, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}"
                         Margin="0,0,15,0" Style="{StaticResource RadioButtonStyle}"/>
        </StackPanel>

        <StackPanel Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Orientation="Horizontal" Margin="0,5,0,0">
            <RadioButton Content="Режекторный" GroupName="Processing"
                         IsChecked="{Binding Processing.IsBandStopSelected, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}"
                         Margin="0,0,15,0" Style="{StaticResource RadioButtonStyle}"/>
            <RadioButton Content="Скользящее среднее" GroupName="Processing"
                         IsChecked="{Binding Processing.IsMovingAverageSelected, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}"
                         Margin="0,0,15,0" Style="{StaticResource RadioButtonStyle}"/>
            <RadioButton Content="Эксп. сглаживание" GroupName="Processing"
                         IsChecked="{Binding Processing.IsExponentialSmoothingSelected, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}"
                         Style="{StaticResource RadioButtonStyle}"/>
        </StackPanel>

        <ContentControl Grid.Row="1" Grid.RowSpan="2" Grid.Column="2" Margin="10,0,0,0">
            <ContentControl.Style>
                <Style TargetType="ContentControl">
                    <Setter Property="ContentTemplate" Value="{x:Null}"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Processing.IsLowPassSelected, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="True">
                            <Setter Property="ContentTemplate">
                                <Setter.Value>
                                    <DataTemplate>
                                        <StackPanel Orientation="Vertical">
                                            <TextBlock Text="Граничная частота:" Margin="0,0,0,2"/>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBox 
                                                    Width="50" 
                                                    Style="{StaticResource TextBoxStyle}"
                                                    Text="{Binding Processing.LowPassCutoff, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}" 
                                                    />
                                                <TextBlock Text="Гц" VerticalAlignment="Center" Margin="5,0,0,0"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </DataTemplate>
                                </Setter.Value>
                            </Setter>
                        </DataTrigger>

                        <DataTrigger Binding="{Binding Processing.IsHighPassSelected, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="True">
                            <Setter Property="ContentTemplate">
                                <Setter.Value>
                                    <DataTemplate>
                                        <StackPanel Orientation="Vertical">
                                            <TextBlock Text="Граничная частота:" Margin="0,0,0,2"/>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBox 
                                                    Width="50" 
                                                    Style="{StaticResource TextBoxStyle}"
                                                    Text="{Binding Processing.HighPassCutoff, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}" 
                                                    />
                                                <TextBlock Text="Гц" VerticalAlignment="Center" Margin="5,0,0,0"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </DataTemplate>
                                </Setter.Value>
                            </Setter>
                        </DataTrigger>

                        <DataTrigger Binding="{Binding Processing.IsBandPassSelected, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="True">
                            <Setter Property="ContentTemplate">
                                <Setter.Value>
                                    <DataTemplate>
                                        <StackPanel Orientation="Vertical">
                                            <TextBlock Text="Диапазон частот:" Margin="0,0,0,2"/>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBox 
                                                    Width="50" 
                                                    Style="{StaticResource TextBoxStyle}"
                                                    Text="{Binding Processing.BandPassLow, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}"
                                                    />
                                                <TextBlock Text="-" VerticalAlignment="Center" Margin="3,0,3,0"/>
                                                <TextBox 
                                                    Width="50" 
                                                    Style="{StaticResource TextBoxStyle}" 
                                                    Text="{Binding Processing.BandPassHigh, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}"
                                                    />
                                                <TextBlock Text="Гц" VerticalAlignment="Center" Margin="5,0,0,0"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </DataTemplate>
                                </Setter.Value>
                            </Setter>
                        </DataTrigger>

                        <DataTrigger Binding="{Binding Processing.IsBandStopSelected, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="True">
                            <Setter Property="ContentTemplate">
                                <Setter.Value>
                                    <DataTemplate>
                                        <StackPanel Orientation="Vertical">
                                            <TextBlock Text="Подавляемый диапазон:" Margin="0,0,0,2"/>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBox 
                                                    Width="50" 
                                                    Style="{StaticResource TextBoxStyle}"
                                                    Text="{Binding Processing.BandStopLow, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}"
                                                    />
                                                <TextBlock Text="-" VerticalAlignment="Center" Margin="3,0,3,0"/>
                                                <TextBox 
                                                    Width="50" 
                                                    Style="{StaticResource TextBoxStyle}"
                                                    Text="{Binding Processing.BandStopHigh, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}"
                                                    />
                                                <TextBlock Text="Гц" VerticalAlignment="Center" Margin="5,0,0,0"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </DataTemplate>
                                </Setter.Value>
                            </Setter>
                        </DataTrigger>

                        <DataTrigger Binding="{Binding Processing.IsMovingAverageSelected, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="True">
                            <Setter Property="ContentTemplate">
                                <Setter.Value>
                                    <DataTemplate>
                                        <StackPanel Orientation="Vertical">
                                            <TextBlock Text="Размер окна:" Margin="0,0,0,2"/>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBox 
                                                    Width="50" 
                                                    Style="{StaticResource TextBoxStyle}"
                                                    Text="{Binding Processing.MovingAverageWindow, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}"
                                                    />
                                                <TextBlock Text="отсчётов" VerticalAlignment="Center" Margin="5,0,0,0"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </DataTemplate>
                                </Setter.Value>
                            </Setter>
                        </DataTrigger>

                        <DataTrigger Binding="{Binding Processing.IsExponentialSmoothingSelected, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="True">
                            <Setter Property="ContentTemplate">
                                <Setter.Value>
                                    <DataTemplate>
                                        <StackPanel Orientation="Vertical">
                                            <TextBlock Text="Коэффициент сглаживания:" Margin="0,0,0,2"/>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBox 
                                                    Width="50" 
                                                    Style="{StaticResource TextBoxStyle}"
                                                    Text="{Binding Processing.ExponentialAlpha, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}"
                                                    />
                                                <TextBlock Text="(0.0 - 1.0)" VerticalAlignment="Center" Margin="5,0,0,0" Foreground="Gray"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </DataTemplate>
                                </Setter.Value>
                            </Setter>
                        </DataTrigger>

                    </Style.Triggers>
                </Style>
            </ContentControl.Style>
        </ContentControl>

    </Grid>
</UserControl>
